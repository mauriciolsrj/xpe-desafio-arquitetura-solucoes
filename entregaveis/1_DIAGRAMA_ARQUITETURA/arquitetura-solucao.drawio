<mxfile host="app.diagrams.net" modified="2026-02-08T00:00:00.000Z" agent="5.0" version="22.0.8" type="device">
  <diagram id="ecommerce-architecture" name="Arquitetura E-Commerce HA">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Título -->
        <mxCell id="titulo" value="Arquitetura E-Commerce de Alta Disponibilidade - Google Cloud Platform" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="10" width="1000" height="30" as="geometry" />
        </mxCell>

        <!-- End Users -->
        <mxCell id="users" value="End Users" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6" vertex="1" parent="1">
          <mxGeometry x="450" y="50" width="100" height="40" as="geometry" />
        </mxCell>

        <!-- Global Load Balancer -->
        <mxCell id="glb" value="Global External LB&#xa;HTTP/HTTPS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4285F4;strokeColor=#1a73e8;fontColor=#fff" vertex="1" parent="1">
          <mxGeometry x="400" y="120" width="200" height="50" as="geometry" />
        </mxCell>
        
        <!-- Cloud Armor -->
        <mxCell id="armor" value="Cloud Armor&#xa;SQLi + XSS Protection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EA4335;strokeColor=#c5221f;fontColor=#fff" vertex="1" parent="1">
          <mxGeometry x="400" y="200" width="200" height="50" as="geometry" />
        </mxCell>

        <!-- VPC Container -->
        <mxCell id="vpc" value="VPC ecommerce-vpc" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#34A853;strokeWidth=2;dashed=0" vertex="1" parent="1">
          <mxGeometry x="250" y="280" width="600" height="350" as="geometry" />
        </mxCell>

        <!-- MIG Container -->
        <mxCell id="mig_label" value="Managed Instance Group&#xa;(Regional Multi-Zone)&#xa;Min: 3 | Max: 6 Instâncias&#xa;CPU Target: 70%" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;strokeColor=#137333;fontColor=#fff;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="270" y="300" width="560" height="50" as="geometry" />
        </mxCell>

        <!-- Zone A -->
        <mxCell id="zone_a_label" value="Zone A (us-central1-a)" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="280" y="370" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="zone_a" value="Instances&#xa;Ubuntu 22.04 LTS&#xa;e2-standard-2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a8d5ba;strokeColor=#52c01a" vertex="1" parent="1">
          <mxGeometry x="280" y="395" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Zone B -->
        <mxCell id="zone_b_label" value="Zone B (us-central1-b)" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="440" y="370" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="zone_b" value="Instances&#xa;Ubuntu 22.04 LTS&#xa;e2-standard-2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a8d5ba;strokeColor=#52c01a" vertex="1" parent="1">
          <mxGeometry x="440" y="395" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Zone C -->
        <mxCell id="zone_c_label" value="Zone C (us-central1-c)" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="600" y="370" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="zone_c" value="Instances&#xa;Ubuntu 22.04 LTS&#xa;e2-standard-2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#a8d5ba;strokeColor=#52c01a" vertex="1" parent="1">
          <mxGeometry x="600" y="395" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Private Service Connection -->
        <mxCell id="psc" value="Private Service Connect" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffc966;strokeColor=#d79b00" vertex="1" parent="1">
          <mxGeometry x="400" y="490" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Cloud SQL Primary -->
        <mxCell id="sql_primary" value="Cloud SQL Primary&#xa;PostgreSQL 15&#xa;Regional HA + Standby" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FBBC04;strokeColor=#9c6c00" vertex="1" parent="1">
          <mxGeometry x="350" y="600" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Cloud SQL Read Replica (DR) -->
        <mxCell id="sql_replica" value="Cloud SQL Replica&#xa;us-east1 (DR)&#xa;Read-Only" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FBBC04;strokeColor=#9c6c00;fontColor=#000;opacity=70" vertex="1" parent="1">
          <mxGeometry x="650" y="600" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- Backups -->
        <mxCell id="backups" value="Backups & PITR&#xa;7 dias retention&#xa;30 snapshots" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c5e1a5;strokeColor=#7e57c2" vertex="1" parent="1">
          <mxGeometry x="50" y="600" width="150" height="60" as="geometry" />
        </mxCell>

        <!-- Monitoring -->
        <mxCell id="monitoring" value="Cloud Monitoring&#xa;Cloud Logging&#xa;SLIs Tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9C27B0;strokeColor=#6a1b9a;fontColor=#fff" vertex="1" parent="1">
          <mxGeometry x="50" y="400" width="150" height="60" as="geometry" />
        </mxCell>

        <!-- IAM & Security -->
        <mxCell id="iam" value="IAM Service Account&#xa;Roles:&#xa;cloudsql.client&#xa;logging.logWriter&#xa;monitoring.metricWriter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF6F00;strokeColor=#e65100;fontColor=#fff;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="50" y="290" width="150" height="80" as="geometry" />
        </mxCell>

        <!-- Firewall Rules -->
        <mxCell id="firewall" value="Firewall Rules&#xa;GLB: 130.211.0.0/22&#xa;IAP SSH: 35.235.240.0/20" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dc3545;strokeColor=#bd2130;fontColor=#fff;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="50" y="500" width="150" height="70" as="geometry" />
        </mxCell>

        <!-- Autoscaler -->
        <mxCell id="autoscaler" value="Autoscaler&#xa;Min: 3&#xa;Max: 6&#xa;Scale-in: 1/10min" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#00BCD4;strokeColor=#00838f;fontColor=#fff" vertex="1" parent="1">
          <mxGeometry x="50" y="700" width="150" height="80" as="geometry" />
        </mxCell>

        <!-- Cloud NAT -->
        <mxCell id="nat" value="Cloud NAT&#xa;Outbound Access" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#7B68EE;strokeColor=#4B0082;fontColor=#fff" vertex="1" parent="1">
          <mxGeometry x="870" y="400" width="140" height="60" as="geometry" />
        </mxCell>

        <!-- Arrows -->
        <mxCell id="arrow1" edge="1" parent="1" source="users" target="glb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" edge="1" parent="1" source="glb" target="armor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" edge="1" parent="1" source="armor" target="zone_a">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" edge="1" parent="1" source="armor" target="zone_b">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" edge="1" parent="1" source="armor" target="zone_c">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" edge="1" parent="1" source="zone_a" target="psc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow7" edge="1" parent="1" source="zone_b" target="psc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow8" edge="1" parent="1" source="zone_c" target="psc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow9" edge="1" parent="1" source="psc" target="sql_primary">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow10" edge="1" parent="1" source="sql_primary" target="sql_replica">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="targetPoint" x="650" y="630" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow11" edge="1" parent="1" source="sql_primary" target="backups">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend_title" value="Legenda" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="870" y="50" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="IaaS: Máquinas Virtuais (3-6 instâncias)" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="870" y="75" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="PaaS: Banco de Dados Gerenciado" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="870" y="95" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="HA: High Availability (3 zonas)" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="870" y="115" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="DR: Disaster Recovery" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="870" y="135" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend5" value="IAM: Controle de Acesso" style="text;html=1;strokeColor=none;fillColor=none;align=left;fontSize=9" vertex="1" parent="1">
          <mxGeometry x="870" y="155" width="150" height="15" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>