<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <defs>
    <style>
      .title { font: bold 18px Arial; }
      .label { font: bold 12px Arial; }
      .text { font: 11px Arial; }
      .box { fill: #e8f4f8; stroke: #0066cc; stroke-width: 2; }
      .box-green { fill: #d4f1d4; stroke: #00aa00; stroke-width: 2; }
      .box-blue { fill: #d4e8ff; stroke: #0066cc; stroke-width: 2; }
      .box-red { fill: #ffe8e8; stroke: #cc0000; stroke-width: 2; }
      .box-orange { fill: #ffe8cc; stroke: #cc6600; stroke-width: 2; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .armor { fill: #ff6666; stroke: #cc0000; stroke-width: 2; color: white; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>

  <!-- Título -->
  <text x="600" y="30" text-anchor="middle" class="title">
    Arquitetura E-Commerce de Alta Disponibilidade - Google Cloud Platform
  </text>

  <!-- End Users -->
  <rect x="500" y="50" width="100" height="40" class="box" rx="5"/>
  <text x="550" y="75" text-anchor="middle" class="label">End Users</text>

  <!-- Global Load Balancer -->
  <rect x="400" y="120" width="200" height="50" class="box-blue" rx="5"/>
  <text x="500" y="140" text-anchor="middle" class="label">Global External LB</text>
  <text x="500" y="157" text-anchor="middle" class="text">HTTP/HTTPS</text>

  <!-- Cloud Armor -->
  <rect x="400" y="200" width="200" height="50" class="armor" rx="5"/>
  <text x="500" y="220" text-anchor="middle" class="label" style="fill: white;">Cloud Armor</text>
  <text x="500" y="237" text-anchor="middle" class="text" style="fill: white;">SQLi + XSS Protection</text>

  <!-- VPC Container -->
  <rect x="250" y="280" width="600" height="350" fill="none" stroke="#00aa00" stroke-width="3" stroke-dasharray="5,5" rx="10"/>
  <text x="270" y="300" class="label" style="fill: #00aa00;">VPC ecommerce-vpc</text>

  <!-- MIG Label -->
  <rect x="270" y="310" width="560" height="45" class="box-green" rx="5"/>
  <text x="550" y="328" text-anchor="middle" class="label">Managed Instance Group (Regional Multi-Zone)</text>
  <text x="550" y="345" text-anchor="middle" class="text">Min: 3 | Max: 6 Instâncias | CPU Target: 70%</text>

  <!-- Zone A -->
  <rect x="280" y="375" width="110" height="65" class="box-green" rx="5"/>
  <text x="335" y="393" text-anchor="middle" class="label">Zone A</text>
  <text x="335" y="410" text-anchor="middle" class="text">us-central1-a</text>
  <text x="335" y="425" text-anchor="middle" class="text">Instances</text>
  <text x="335" y="432" text-anchor="middle" class="text">(Ubuntu 22.04)</text>

  <!-- Zone B -->
  <rect x="440" y="375" width="110" height="65" class="box-green" rx="5"/>
  <text x="495" y="393" text-anchor="middle" class="label">Zone B</text>
  <text x="495" y="410" text-anchor="middle" class="text">us-central1-b</text>
  <text x="495" y="425" text-anchor="middle" class="text">Instances</text>
  <text x="495" y="432" text-anchor="middle" class="text">(Ubuntu 22.04)</text>

  <!-- Zone C -->
  <rect x="600" y="375" width="110" height="65" class="box-green" rx="5"/>
  <text x="655" y="393" text-anchor="middle" class="label">Zone C</text>
  <text x="655" y="410" text-anchor="middle" class="text">us-central1-c</text>
  <text x="655" y="425" text-anchor="middle" class="text">Instances</text>
  <text x="655" y="432" text-anchor="middle" class="text">(Ubuntu 22.04)</text>

  <!-- Private Service Connection -->
  <rect x="400" y="465" width="200" height="35" class="box-orange" rx="5"/>
  <text x="500" y="487" text-anchor="middle" class="label">Private Service Connect</text>

  <!-- Cloud SQL Primary -->
  <rect x="350" y="535" width="200" height="60" class="box-blue" rx="5"/>
  <text x="450" y="553" text-anchor="middle" class="label">Cloud SQL Primary</text>
  <text x="450" y="570" text-anchor="middle" class="text">PostgreSQL 15</text>
  <text x="450" y="585" text-anchor="middle" class="text">Regional HA + Standby</text>

  <!-- Cloud SQL Replica (DR) -->
  <rect x="650" y="535" width="180" height="60" class="box-blue" rx="5" opacity="0.7"/>
  <text x="740" y="553" text-anchor="middle" class="label">Cloud SQL Replica</text>
  <text x="740" y="570" text-anchor="middle" class="text">us-east1 (DR)</text>
  <text x="740" y="585" text-anchor="middle" class="text">Read-Only</text>

  <!-- Backups -->
  <rect x="50" y="535" width="150" height="60" class="box" rx="5"/>
  <text x="125" y="555" text-anchor="middle" class="label">Backups & PITR</text>
  <text x="125" y="572" text-anchor="middle" class="text">7 dias retention</text>
  <text x="125" y="585" text-anchor="middle" class="text">30 snapshots</text>

  <!-- IAM & Security -->
  <rect x="50" y="280" width="150" height="75" class="box-red" rx="5"/>
  <text x="125" y="303" text-anchor="middle" class="label">IAM Service Account</text>
  <text x="125" y="320" text-anchor="middle" class="text">Roles:</text>
  <text x="125" y="335" text-anchor="middle" class="text">cloudsql.client</text>
  <text x="125" y="348" text-anchor="middle" class="text">logging.logWriter</text>

  <!-- Firewall Rules -->
  <rect x="50" y="385" width="150" height="65" class="box-red" rx="5"/>
  <text x="125" y="403" text-anchor="middle" class="label">Firewall Rules</text>
  <text x="125" y="420" text-anchor="middle" class="text">GLB: 130.211.0.0/22</text>
  <text x="125" y="435" text-anchor="middle" class="text">IAP SSH: 35.235.240.0/20</text>

  <!-- Monitoring -->
  <rect x="50" y="475" width="150" height="60" class="box" rx="5"/>
  <text x="125" y="495" text-anchor="middle" class="label">Cloud Monitoring</text>
  <text x="125" y="512" text-anchor="middle" class="text">Cloud Logging</text>
  <text x="125" y="525" text-anchor="middle" class="text">SLIs Tracking</text>

  <!-- Arrows -->
  <path d="M 550 90 L 500 120" class="arrow"/>
  <path d="M 500 170 L 500 200" class="arrow"/>
  <path d="M 400 250 L 335 375" class="arrow"/>
  <path d="M 500 250 L 495 375" class="arrow"/>
  <path d="M 600 250 L 655 375" class="arrow"/>
  <path d="M 335 440 L 450 465" class="arrow"/>
  <path d="M 495 440 L 500 465" class="arrow"/>
  <path d="M 655 440 L 550 465" class="arrow"/>
  <path d="M 500 500 L 450 535" class="arrow"/>
  <path d="M 450 595 L 650 565" class="arrow"/>
  <path d="M 450 595 L 200 565" class="arrow"/>

  <!-- Legend -->
  <rect x="900" y="50" width="250" height="200" fill="#f9f9f9" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="920" y="70" class="label">Legenda</text>
  
  <rect x="910" y="85" width="20" height="20" class="box-blue" rx="2"/>
  <text x="945" y="100" class="text">IaaS: Máquinas Virtuais</text>
  
  <rect x="910" y="115" width="20" height="20" class="box-blue" rx="2"/>
  <text x="945" y="130" class="text">PaaS: Banco de Dados</text>
  
  <rect x="910" y="145" width="20" height="20" class="box-green" rx="2"/>
  <text x="945" y="160" class="text">HA: 3 Zonas</text>
  
  <rect x="910" y="175" width="20" height="20" class="box-blue" rx="2" opacity="0.7"/>
  <text x="945" y="190" class="text">DR: Disaster Recovery</text>
  
  <rect x="910" y="205" width="20" height="20" class="box-red" rx="2"/>
  <text x="945" y="220" class="text">IAM: Controle Acesso</text>

  <!-- Key Points -->
  <rect x="900" y="270" width="250" height="350" fill="#f9f9f9" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="920" y="290" class="label">Componentes</text>
  
  <text x="920" y="315" style="font: bold 11px Arial;">Zonas de Disponibilidade</text>
  <text x="930" y="330" class="text">3 zonas: A, B, C</text>
  <text x="930" y="345" class="text">Resiliência contra falhas</text>
  
  <text x="920" y="370" style="font: bold 11px Arial;">Load Balancing</text>
  <text x="930" y="385" class="text">Global LB (HTTP/HTTPS)</text>
  <text x="930" y="400" class="text">Distribuição inteligente</text>
  
  <text x="920" y="425" style="font: bold 11px Arial;">Autoscaling</text>
  <text x="930" y="440" class="text">Min: 3 instâncias</text>
  <text x="930" y="455" class="text">Max: 6 instâncias</text>
  <text x="930" y="470" class="text">Trigger: CPU > 70%</text>
  
  <text x="920" y="495" style="font: bold 11px Arial;">Banco de Dados</text>
  <text x="930" y="510" class="text">Cloud SQL PostgreSQL</text>
  <text x="930" y="525" class="text">Regional HA + DR</text>
  <text x="930" y="540" class="text">Backup + PITR 7 dias</text>
  
  <text x="920" y="565" style="font: bold 11px Arial;">Segurança</text>
  <text x="930" y="580" class="text">Private Service Connect</text>
  <text x="930" y="595" class="text">Cloud Armor</text>
  <text x="930" y="605" class="text">IAM Roles específicas</text>
</svg>